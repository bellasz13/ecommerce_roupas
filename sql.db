CREATE DATABASE IF NOT EXISTS trendstore
  DEFAULT CHARACTER SET utf8mb4
  DEFAULT COLLATE utf8mb4_unicode_ci;

USE trendstore;

CREATE TABLE clientes (
  id_cliente       INT PRIMARY KEY AUTO_INCREMENT,
  nome_completo    VARCHAR(150) NOT NULL,
  email            VARCHAR(120) NOT NULL UNIQUE,
  telefone         VARCHAR(20),
  cpf              CHAR(11) NOT NULL UNIQUE,
  data_nascimento  DATE,
  senha_hash       VARCHAR(255) NOT NULL,
  criado_em        DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE enderecos (
  id_endereco   INT PRIMARY KEY AUTO_INCREMENT,
  id_cliente    INT NOT NULL,
  apelido       VARCHAR(50),
  cep           VARCHAR(15),
  logradouro    VARCHAR(150),
  numero        VARCHAR(10),
  complemento   VARCHAR(80),
  bairro        VARCHAR(80),
  cidade        VARCHAR(80),
  estado        VARCHAR(2),
  pais          VARCHAR(50) DEFAULT 'Brasil',
  FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente)
);

CREATE TABLE produtos (
  id_produto    INT PRIMARY KEY,
  nome          VARCHAR(150) NOT NULL,
  preco         DECIMAL(10,2) NOT NULL,
  descricao     TEXT,
  imagem        VARCHAR(255),
  categoria     VARCHAR(50)
);

CREATE TABLE cartoes (
  id_cartao        INT PRIMARY KEY AUTO_INCREMENT,
  id_cliente       INT NOT NULL,
  apelido          VARCHAR(50),
  bandeira         VARCHAR(30),
  ultimos_digitos  CHAR(4) NOT NULL,
  validade_mes     TINYINT,
  validade_ano     SMALLINT,
  token_gateway    VARCHAR(255),
  criado_em        DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente)
);

CREATE TABLE carrinhos (
  id_carrinho   INT PRIMARY KEY AUTO_INCREMENT,
  id_cliente    INT NOT NULL,
  atualizado_em DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente)
);

CREATE TABLE itens_carrinho (
  id_item_carrinho INT PRIMARY KEY AUTO_INCREMENT,
  id_carrinho      INT NOT NULL,
  id_produto       INT NOT NULL,
  quantidade       INT NOT NULL,
  preco_unitario   DECIMAL(10,2) NOT NULL,
  FOREIGN KEY (id_carrinho) REFERENCES carrinhos(id_carrinho),
  FOREIGN KEY (id_produto) REFERENCES produtos(id_produto)
);

CREATE TABLE pedidos (
  id_pedido          INT PRIMARY KEY AUTO_INCREMENT,
  id_cliente         INT NOT NULL,
  id_endereco_entrega INT NOT NULL,
  status             VARCHAR(20) DEFAULT 'em_processamento',
  data_pedido        DATETIME DEFAULT CURRENT_TIMESTAMP,
  valor_total        DECIMAL(10,2),
  FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente),
  FOREIGN KEY (id_endereco_entrega) REFERENCES enderecos(id_endereco)
);

CREATE TABLE itens_pedido (
  id_item_pedido INT PRIMARY KEY AUTO_INCREMENT,
  id_pedido      INT NOT NULL,
  id_produto     INT NOT NULL,
  quantidade     INT NOT NULL,
  preco_unitario DECIMAL(10,2) NOT NULL,
  FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido),
  FOREIGN KEY (id_produto) REFERENCES produtos(id_produto)
);

CREATE TABLE favoritos (
  id_favorito  INT PRIMARY KEY AUTO_INCREMENT,
  id_cliente   INT NOT NULL,
  id_produto   INT NOT NULL,
  criado_em    DATETIME DEFAULT CURRENT_TIMESTAMP,
  UNIQUE (id_cliente, id_produto),
  FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente),
  FOREIGN KEY (id_produto) REFERENCES produtos(id_produto)
);

INSERT INTO produtos (id_produto, nome, preco, descricao, imagem, categoria) VALUES
(1,  'Trio OFF',              779.90, 'Conjunto de blazer, cropped e calça em alfaiataria leve, ideal para ocasiões especiais.', 'imagens/roupas-fem/i1.jpg',  'feminino'),
(2,  'Conjunto White',        429.90, 'Conjunto de calça e camisa em algodão, leve e fresco para o dia a dia.',                 'imagens/roupas-fem/i2.jpg',  'feminino'),
(3,  'Vestido Amarelo Terroso',1199.90,'Vestido com saia plissada, elegante para festas e ocasiões similares.',                 'imagens/roupas-fem/i3.png',  'feminino'),
(4,  'Vestido Burnet Red',    1559.90,'Vestido tomara que caia em cetim vermelho, ideal para festas.',                          'imagens/roupas-fem/i4.jpg',  'feminino'),
(5,  'Regata Godê Pink',      159.90, 'Regata godê elegante para o dia a dia.',                                                 'imagens/roupas-fem/i5.jpg',  'feminino'),
(6,  'Conjunto Red Blood',    549.90, 'Conjunto de calça e blazer vermelho, elegante, versátil e ideal para festas e trabalho.','imagens/roupas-fem/i6.jpg',  'feminino'),
(7,  'Conjunto Grey',         479.90, 'Conjunto de calça pantalona e blusa de ombro único, elegante para o dia a dia.',        'imagens/roupas-fem/i7.jpg',  'feminino'),
(8,  'Vestido Bege Plissado', 1249.90,'Vestido com saia plissada e tomara que caia, se adequa perfeitamente à ocasiões festivas.','imagens/roupas-fem/i8.jpg','feminino'),
(9,  'Vestido Pink Flower',   1789.90,'Vestido rosa com alça fina e aplicações de flores, dedicado à ocasiões especiais.',      'imagens/roupas-fem/i9.jpg',  'feminino'),
(10, 'Vestido Yellow Butter', 829.90, 'Vestido mid em tomara que caia com fenda lateral, elegante e ideal para festas.',        'imagens/roupas-fem/i10.jpg', 'feminino'),
(11, 'Macacão Ombro Único',   669.90, 'Macacão de ombro único com calça pantalona, elegante e sexy para ocasiões festivas.',    'imagens/roupas-fem/i11.jpg', 'feminino'),
(12, 'Conjunto Purple',       409.90, 'Conjunto de blusa assimétrica de ombro único e calça.',                                 'imagens/roupas-fem/i12.png', 'feminino'),
(13, 'Macacão Decote V',      399.90, 'Macacão com decote profundo em V e calça pantalona.',                                   'imagens/roupas-fem/i13.jpg', 'feminino'),
(14, 'Conjunto Réveillon',    489.90, 'Conjunto de cropped e calça mid com amarrações, ideal para festividades no final do ano.','imagens/roupas-fem/i14.jpg','feminino'),
(15, 'Grey Dress',            839.90, 'Vestido maxi de ombro único e caimento leve e solto, acompanha lenço versátil.',        'imagens/roupas-fem/i15.jpg', 'feminino'),
(16, 'Vestido Luar',          989.90, 'Vestido longo tomara que caia com caimento leve e solto, acompanha lenço versátil.',    'imagens/roupas-fem/i16.jpg', 'feminino'),

(101,'Camisa Linho',          179.90, 'Camisa de linho com manga curta e botões frontais, ideal para ocasiões descontraídas.', 'imagens/roupas-masc/i1.jpg', 'masculino'),
(102,'Calça Sarja Bege',      229.90, 'Calça de sarja com modelagem solta.',                                                   'imagens/roupas-masc/i2.jpg', 'masculino'),
(103,'Blusa Tricot Azul',     259.90, 'Blusa em tricot que se adequa ao corpo, ideal para dias frios.',                        'imagens/roupas-masc/i3.jpg', 'masculino'),
(104,'Blusa Tricot OFF',      259.90, 'Blusa em tricot com modelagem solta, ideal para dias frios.',                           'imagens/roupas-masc/i4.jpg', 'masculino'),
(105,'Bermuda Sarja Bege',    159.90, 'Bermuda de sarja com modelagem mais justa, ideal para ocasiões descontraídas.',         'imagens/roupas-masc/i5.jpg', 'masculino'),
(106,'Camisa Listrada',       199.90, 'Camisa social listrada com modelagem solta.',                                           'imagens/roupas-masc/i6.jpg', 'masculino'),
(107,'Camiseta Pastel',       179.90, 'Camiseta em tom pastel com modelagem solta.',                                           'imagens/roupas-masc/i7.jpg', 'masculino'),
(108,'Regata Bege',           109.90, 'Regata com modelagem justa.',                                                           'imagens/roupas-masc/i8.jpg', 'masculino'),
(109,'Conjunto BIC Azul',     389.90, 'Conjunto de bermuda e camiseta ideais para o dia a dia.',                               'imagens/roupas-masc/i9.jpg', 'masculino'),
(110,'Camisa Boxy Pastel',    129.90, 'Camisa com modelagem boxy de manga curta e bolsos frontais.',                           'imagens/roupas-masc/i10.jpg','masculino'),
(111,'Camisa Oliva',          219.90, 'Camisa social com um bolso frontal.',                                                   'imagens/roupas-masc/i11.jpg','masculino'),
(112,'Camisa Linho - Ramos',  179.90, 'Camisa de linho de manga curta com desenhos frontais.',                                'imagens/roupas-masc/i12.jpg','masculino'),
(113,'Camisa Gaivotas',       169.90, 'Camisa de manga curta com desenho de gaivotas.',                                        'imagens/roupas-masc/i13.jpg','masculino'),
(114,'Calça Sarja Marrom',    189.90, 'Calça de sarja com modelagem mais justa.',                                              'imagens/roupas-masc/i14.jpg','masculino'),
(115,'Camisa Zebra',           89.90, 'Camisa de manga curta com listras diagonais.',                                          'imagens/roupas-masc/i15.jpg','masculino'),
(116,'Jorts',                 109.90, 'Jorts com modelagem solta, ideal para ocasiões descontraídas.',                         'imagens/roupas-masc/i16.jpg','masculino'),

(201,'Cinto OFF',              59.90, 'Cinto unissex com fivela prata.',                                                       'imagens/acessorios/i1.jpg',  'acessorios'),
(202,'Relógio Brown Gold',     99.90, 'Relógio unissex marrom com detalhes em dourado.',                                      'imagens/acessorios/i2.jpg',  'acessorios'),
(203,'Dupla - Silver&Gold',   119.90, 'Conjunto de corrente e brinco com mistura de prata e dourado.',                        'imagens/acessorios/i3.jpg',  'acessorios'),
(204,'Brinco Informal',        49.90, 'Brinco em formato orgânico para fugir do básico.',                                     'imagens/acessorios/i4.jpg',  'acessorios'),
(205,'Corrente Sun',           89.90, 'Corrente dourada com pingente de sol.',                                                'imagens/acessorios/i5.jpg',  'acessorios'),
(206,'Brinco Pedras',          79.90, 'Brinco com trio de pedras variadas.',                                                  'imagens/acessorios/i6.jpg',  'acessorios'),
(207,'Relógio Gold',          179.90, 'Clássico relógio dourado unissex.',                                                    'imagens/acessorios/i7.jpg',  'acessorios'),
(208,'Cinto Couro Bege',      149.90, 'Cinto de couro com fivela dourada.',                                                   'imagens/acessorios/i8.jpg',  'acessorios'),
(209,'Bolsa Sunset',          169.90, 'Bolsa de tamanho pequeno-médio com alça curta.',                                      'imagens/acessorios/i9.jpg',  'acessorios'),
(210,'Bolsa Tiracolo',        129.90, 'Bolsa de tamanho pequeno-médio com alça mediana de corrente.',                        'imagens/acessorios/i10.jpg', 'acessorios'),
(211,'Bolsa Brown',           159.90, 'Bolsa de PU acolchoada com alça mediana e detalhes dourados.',                        'imagens/acessorios/i11.jpg', 'acessorios'),
(212,'Bolsa Couro Branco',    309.90, 'Bolsa de couro em tamanho pequeno-médio com detalhes dourados.',                       'imagens/acessorios/i12.jpg', 'acessorios'),
(213,'Brinco Flower',          49.90, 'Brinco em formato de flor, belíssimo para fugir do básico.',                           'imagens/acessorios/i13.png', 'acessorios'),
(214,'Anel Pérola',            89.90, 'Anel dourado com pérola.',                                                             'imagens/acessorios/i14.jpg', 'acessorios'),
(215,'Anel Diamond',          239.90, 'Anel banhado a ouro 18k com pedraria branca.',                                         'imagens/acessorios/i15.jpg', 'acessorios'),
(216,'Dupla Green',           139.90, 'Conjunto de corrente e brincos pratas com pedraria verde.',                            'imagens/acessorios/i16.jpg', 'acessorios');
